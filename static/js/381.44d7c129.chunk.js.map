{"version":3,"file":"static/js/381.44d7c129.chunk.js","mappings":"uLAEMA,EAAW,4BAIJC,EAAgBC,IAAAA,OAAa,CACtCC,QAAQH,IAGCI,EAAeF,IAAAA,OAAa,CACrCC,QAAQH,EACRK,OAAO,CAACC,MAAM,UAAD,OARH,uM,uHC6Cd,UA5CgB,WACd,IAAMC,GAAWC,EAAAA,EAAAA,MAEXC,EAAOF,EAASG,MAAMC,WACtBC,EAAOL,EAASG,MAAME,KACtBC,GAAcC,EAAAA,EAAAA,KAAY,SAACJ,GAAD,OAAWA,EAAMK,KAAKF,eACtD,GAA8BG,EAAAA,EAAAA,UAAS,MAAvC,eAAOC,EAAP,KAAgBC,EAAhB,KAoBA,OAlBAC,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAW,mCAAG,6GAEEhB,EAAAA,EAAAA,KAAiB,UAAW,CAC5CiB,OAAQR,EAAYS,IACpBC,SAAUX,EAAKW,SAASC,KAAI,SAACC,GAAD,MAAW,CACrCC,UAAWD,EAAKH,IAChBK,SAAUF,EAAKG,cAEjBC,OAAQjB,EAAKkB,MACbC,QAAStB,EAAKuB,gBAAgBD,UAThB,OAEVE,EAFU,OAWhBf,EAAWe,EAAIxB,KAAKa,KAXJ,uGAAH,qDAcjBb,GAAQW,MACP,CAACR,EAAMH,EAAMI,KAGd,iBACEqB,MAAO,CACLC,OAAQ,QACRC,QAAS,OACTC,cAAe,SACfC,WAAY,SACZC,eAAgB,UANpB,UASGtB,EAAO,oEACyDA,GADzD,gDAGR,mBAAQiB,MAAO,CAAEM,QAAS,GAAIC,UAAW,IAAzC","sources":["axiosRequest.js","pages/Success.jsx"],"sourcesContent":["import axios from \"axios\";\n// const BASE_URL = \"https://iconicshoppingnodejs.herokuapp.com/\"\nconst BASE_URL = 'http://localhost:8080/api';\n\nconst TOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyMTJlMTJkMzBlZjcwMjNlY2ZiOGI0YyIsImlzQWRtaW4iOnRydWUsImlhdCI6MTY0NTY2NDIxMywiZXhwIjoxNjQ1Njc1MDEzfQ.wMNj_FwBHJDpxiB4TtUaz7E5uTDkFkMWUbugioVr8Gg\";\n\nexport const publicRequest = axios.create({\n    baseURL:BASE_URL,\n});\n\nexport const userRequest =  axios.create({\n    baseURL:BASE_URL,\n    header:{token: `Bearer ${TOKEN}`}\n});\n","import { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useLocation } from \"react-router\";\nimport { userRequest } from \"../axiosRequest\";\n\nconst Success = () => {\n  const location = useLocation();\n  //in Cart.jsx I sent data and cart. Please check that page for the changes.(in video it's only data)\n  const data = location.state.stripeData;\n  const cart = location.state.cart;\n  const currentUser = useSelector((state) => state.user.currentUser);\n  const [orderId, setOrderId] = useState(null);\n\n  useEffect(() => {\n    const createOrder = async () => {\n      try {\n        const res = await userRequest.post(\"/orders\", {\n          userId: currentUser._id,\n          products: cart.products.map((item) => ({\n            productId: item._id,\n            quantity: item._quantity,\n          })),\n          amount: cart.total,\n          address: data.billing_details.address,\n        });\n        setOrderId(res.data._id);\n      } catch {}\n    };\n    data && createOrder();\n  }, [cart, data, currentUser]);\n\n  return (\n    <div\n      style={{\n        height: \"100vh\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n      }}\n    >\n      {orderId\n        ? `Order has been created successfully. Your order number is ${orderId}`\n        : `Successfull. Your order is being prepared...`}\n      <button style={{ padding: 10, marginTop: 20 }}>Go to Homepage</button>\n    </div>\n  );\n};\n\nexport default Success;"],"names":["BASE_URL","publicRequest","axios","baseURL","userRequest","header","token","location","useLocation","data","state","stripeData","cart","currentUser","useSelector","user","useState","orderId","setOrderId","useEffect","createOrder","userId","_id","products","map","item","productId","quantity","_quantity","amount","total","address","billing_details","res","style","height","display","flexDirection","alignItems","justifyContent","padding","marginTop"],"sourceRoot":""}